<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shining Star | Advait Pai | CS 528</title>
  <link rel="stylesheet" href="./css/project1.css" />
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous" />
</head>

<body style="background-color: #b2f3f3;">
  <h1 class="text-center mb-5 bg-white py-4">Shining Star</h1>
  <div class="container">
    <div class="row my-5">
      <!-- Title -->

      <div class="col-lg-10 offset-lg-1">
        <!-- Steps to reproduce -->

        <p>Project By: Advait Pai<br>Course: CS 528 - Virtual Reality<br>University of Illinois Chicago</p>


        <iframe width="560" height="315" src="https://www.youtube.com/embed/pjYqNsF9AXw?si=4hrjq_wIGW1-2kNE"
          title="YouTube video player" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

        <h1>Section 1 - The Application</h1>
        <h2>About the application</h2>
        <p style="text-align: justify;">
          Shining Star is the final project for the Virtual Reality class, CS 528, at the University of Illinois
          Chicago. Built using Unity, this immersive application lets users explore the night sky in the CAVE system.
          With interactive features like constellation viewing and time manipulation, it merges learning and
          entertainment seamlessly, offering a captivating experience in virtual reality.</p>
        <h2>How you can use the application</h2>
        <p style="text-align: justify;">The application is designed to be used in the CAVE system, a virtual reality
          environment that provides an immersive experience. To know more about the CAVE system you can read <a
            href="https://today.uic.edu/step-into-a-virtual-world/" target="_blank">here</a>. The CAVE system uses head
          tracking glasses and a wand for the user to be able to navigate through the environment. The user is also free
          to move around in the given space area. While the CAVE is the most appropriate environment to experience this
          application, there are additional options for the user to use this application such as the CAVE2 simulator,
          Occulus and Vive. To interact with the application in the Simulator, interactions are given in the
          Installation Section.</p>
        <h2>Things you can do with it</h2>
        <p style="text-align: justify;">This application has been developed using Unity for the CAVE. The key feature of
          the application is its interactive functionality, facilitated through the use of the CAVE wand. Users have the
          ability to engage with
          the application in various ways, enhancing their exploration experience:</p>
        <div class="container">
          <figure>
            <div class="image-row">
              <img class="m-2" src="images/shiningstar/page1/1.png" alt="Image 1">
              <img class="m-2" src="images/shiningstar/page1/2.png" alt="Image 2">
              <img class="m-2" src="images/shiningstar/page1/3.png" alt="Image 3">
            </div>
            <figcaption style="text-align: center;">The various menus of the application</figcaption>
          </figure>
        </div>
        <ul>
          <li><b>Navigate and Orient</b>: Users can fly in any direction and perform rotations (roll, pitch, and yaw)
            using one
            of the hand controllers. As users traverse the CAVE or maneuver through the dataset, the virtual world
            provides feedback on their distance from Sol in parsecs.</li>

          <li><b>Constellation Selection</b>: Users can bring up a menu offering at least five additional sets of
            constellations to choose from or opt to display no constellations. The ability to select from multiple
            constellations enhances user customization and exploration.</li>

          <li><b>Time Control:</b> Users can start and stop time to observe the evolution of constellations and all
            visible
            star locations over time. By default, time progresses forward, but users can also rewind time for backward
            observation.</li>

          <li><b>Constellation Information:</b> Users can access additional information about one constellation,
            enriching
            their understanding and exploration of celestial objects.</li>

          <li><b>Color Scheme Adjustment:</b> Users have the option to change the color scheme from stellar type to the
            number
            of known planets in the system, providing flexibility in visual representation.</li>

          <li><b>Reset Functionality:</b> Users can reset their location, orientation, and time back to the starting
            point,
            offering a convenient way to return to the initial state of exploration.</li>

          <li><b>Scale Adjustment:</b> Users can change the scale mapping of parsecs to feet, allowing them to increase
            or
            decrease the distances between stars according to their preference.</li>
        </ul>


        <h1>Section 2 - The Data:</h1>
        <p style="text-align: justify;">To be able to display the stars and the constellations, we needed to work with
          various datasets. In all we work with 8 datasets and 2 other files. These files can be found in the Assets
          folder and the Resources folder.</p>
        <table class="table table-light">
          <tr>
            <th>File Name</th>
            <th>Purpose</th>
            <th>Source (unmodified)</th>
          </tr>
          <tr>
            <td>athyg_31_reduced_m10_cleaned_subset.csv</td>
            <td>This file contains the data for all the stars. Initial it is 69MB and has 330341 rows × 34 columns. But
              after perform the cleaning, it has 107574 rows × 11 columns. </td>
            <td><a
                href="https://github.com/astronexus/ATHYG-Database/blob/main/data/subsets/athyg_31_reduced_m10.csv.gz">Link</a>
            </td>
          </tr>
          <tr>
          <tr>
            <td>constellation_coord.txt</td>
            <td>This file contains the constellation name, number of stars in the constellation, and the hip ids
              separated by a space for the Modern constellation dataset.</td>
            <td><a
                href="https://github.com/Stellarium/stellarium/blob/master/skycultures/modern/constellationship.fab">Link</a>
            </td>
          </tr>
          <tr>
            <td>indian-constellationship.txt</td>
            <td>This file contains the constellation name, number of stars in the constellation, and the hip ids
              separated by a space for the Indian constellation dataset.</td>
            <td><a
                href="https://github.com/Stellarium/stellarium/blob/master/skycultures/indian/constellationship.fab">Link</a>
            </td>
          </tr>
          <tr>
            <td>boorong-constellationship.txt</td>
            <td>This file contains the constellation name, number of stars in the constellation, and the hip ids
              separated by a space for the Boorong constellation dataset.</td>
            <td><a
                href="https://github.com/Stellarium/stellarium/blob/master/skycultures/boorong/constellationship.fab">Link</a>
            </td>
          </tr>
          <tr>
            <td>egyptian-constellationship.txt</td>
            <td>This file contains the constellation name, number of stars in the constellation, and the hip ids
              separated by a space for the Egyptian constellation dataset.</td>
            <td><a
                href="https://github.com/Stellarium/stellarium/blob/master/skycultures/egyptian/constellationship.fab">Link</a>
            </td>
          </tr>
          <tr>
            <td>romanian-constellationship.txt</td>
            <td>This file contains the constellation name, number of stars in the constellation, and the hip ids
              separated by a space for the Romanian constellation dataset.</td>
            <td><a
                href="https://github.com/Stellarium/stellarium/blob/master/skycultures/romanian/constellationship.fab">Link</a>
            </td>
          </tr>
          <tr>
            <td>norse-constellationship.txt</td>
            <td>This file contains the constellation name, number of stars in the constellation, and the hip ids
              separated by a space for the Norse constellation dataset.</td>
            <td><a
                href="https://github.com/Stellarium/stellarium/blob/master/skycultures/norse/constellationship.fab">Link</a>
            </td>
          </tr>
          <tr>
            <td>exoplanet_cleaned.csv</td>
            <td>This file is the dataset for exoplanets. This file contains the hip id of the star and the number of
              planets around it. This file is used to changed the colour scheme of the stars.</td>
            <td><a
                href="https://exoplanetarchive.ipac.caltech.edu/cgi-bin/TblView/nph-tblView?app=ExoTbls&config=PS">Link</a>
            </td>
          </tr>
          <tr>
            <td>Unicorn Illustration.png</td>
            <td>This image is used to display the constellation 'Monoceros' and it's representation in the night sky,
              when showing the additional information.</td>
            <td><a href="http://www.whitby-astronomers.com/focus/tartan-unicorn">Link</a>
            </td>
          </tr>
          <tr>
            <td>Galaxy sound background.ogg</td>
            <td>This sets the background audio for the application.</td>
            <td><a href="https://freesound.org/people/Isaac200000/sounds/260572/">Link</a>
            </td>
          </tr>
        </table>
        <h2>Cleaning steps performed:</h2>
        The pre-processing performed on the datasets were either performed manually, or using Python and <a
          href="https://pandas.pydata.org">Pandas</a> library. The steps performed are as follows:

        <ul>
          <li><b>Stars Data:</b> To clean this file, we first select a subset of 11 columns since these are the ones we
            work with. We remove the files which have null values for X, Y, Z, VX, VY, VZ and Spect entries. Then we
            remove the data for which the spectral class does not lie in 'O','B','A','F','G','K','M'. Lastly we only
            select stars which are within a range of 25 light years.</li>
          <li><b>Constellation Data:</b> For the 6 constellation data files, we remove all the double spaces and tab
            spaces that occur in the file and replace them with a single space. Then we also remove any trailing empty
            lines in these files to prevent errors. These files are manually cleaned.</li>
          <li><b>Exoplanet Data:</b> We remove all lines with null values, and then group the values by hip ids to
            remove all the duplicates as well. This is done using the Pandas library.</li>
        </ul>
        In code, when working with data files, we ensure that the lines are being checked for null values to prevent any
        errors with reading the files into Unity.
        <h1>Section 3 - Installation:</h1>
        <h2>Loading the application:</h2>
        <div class="row mb-3">
          <div class="col-lg-12">
            <ol style="text-align: justify;">
              <li>Clone the repository from this <a href="https://github.com/advaitpai/CS528_AdvaitPai"
                  target="_blank">GitHub Link</a>. On the code button, select "Download Zip".
              <li>Unzip and open the downloaded folder.</li>
              <li>The <b>data folder</b> contains the <b>cleaning.ipynb</b> and <b>exoplanet_clean.ipynb</b> which
                contains the code written by me to clean the data.
                This can be directly viewd in the GitHub repository or using JupyterNotebook or Visual Studio Code.
              </li>
              <li>The <b>omicron-unity</b> directory contains the project I am developing for the CAVE2. It is a
                stripped down
                version of the Cube World Example.</li>
              <li>Download the <a href="https://unity.com/releases/editor/archive" target="_blank">Unity Version
                  2019.2.11f1</a> using Unity Hub. If you do not have <a href="https://unity.com/unity-hub"
                  target="_blank">Unity Hub</a>, install that as well.</li>
              <li>Once downloaded, then in Unity Hub, click the "Add" button and then select the subfolder omicron-unity
                from the downloaded folder. It should automatically pickup the required Unity Version but if asked,
                choose the appropriate version.</li>
              <li>The project may take some time to load. Once the assets have been loaded, the Unity window will
                launch.</li>
              <li>In the "Assets" folder, there is a scene called "Stary Sky". Drag this scene, to the project hierarchy
                and delete the "Untitled" scene (or any other such scene). Below is a view of the window. </li>
              <div class="col-lg-4 px-5">
                <img style="height: 40rem; width:auto;" src="./images/shiningstar/page3/1.png" />
              </div>
              <li>Once dragged, click the Omicron Tab in the menu and select "Configure for CAVE2 simulator" as shown
                below.</li>
              <div class="col-lg-4 px-5">
                <img style="height: 20rem; width:auto;" src="./images/shiningstar/page3/2.png" />
              </div>
              <li>For now, we demonstrate how to run the application on the CAVE2 simulator. Once the "Stary Sky" scene
                is loaded, click the play button to see the stars and constellations. When
                loading, there maybe an error, ignore this for now. Both the "Play" and the "Pause" button will be
                selected due to this error. Unselect the "Pause" button and that should allow for the scene to be
                viewed.</li>
              <li>To use the application on the CAVE, select the "Configure for CAVE2 Build" option and then follow
                instructions <a
                  href="https://github.com/uic-evl/omicron-unity/wiki/Guide-for-running-Unity-in-CAVE2">here</a>.
                The sections "Configure a Unity project for use with the CAVE2 Simulator" and "Building on CAVE2"
                contain the steps to build the application for the CAVE.</li>
              <li>To use the application on the Oculus, select the "Configure for Oculus" and then in the File -> Build
                Settings, switch platform to Android, choose the appropriate options, and then "Build and Run".</li>
            </ol>
            <h2>Interactions in the CAVE2 simulator:</h2>

            <p style="text-align: justify;"> Once the scene is loaded - </p>
            <ul>
              <li>WASD keys can be used to move in the world.</li>
              <li>QE keys can be used to rotate left and right respectively.</li>
              <li>Right-Click to open the menu and use arrow keys to
                navigate options, and use the Right-Click to select an option.</li>
              <li>Left-Click is used to go back and close the
                menu.</li>
              <li>For sliders for scale and movement speed, navigate to them using the Right-Click and the arrow keys,
                and then move the slider using left and right arrow keys.</li>
            </ul>

            <h1>Section 4 - Interesting Finds during development and using:</h1>

            <p style="text-align: justify;">While developing the application, I had to use a combination of both User
              Experience knowledge as well as Coding skills. The most important find for me was that it is important to
              organise variables and data correctly for efficient usage and re-usage. C# has restrictions on how
              variables can be stored, accessed or indexed and since there may be multiple interactions possible with
              the system, there are also different functions interacting with the same variable, making it pertinent to
              maintain consistency. For this I created a StarData class which would store all values of the individual
              star. Any modification, or access for star values when creating/moving/destorying the GameObjects are only
              allowed through this class variables, which are held as static throughout hence no local variable errors
              happen.</p>
            <p style="text-align: justify;">I also understood the importance of how even if we have all the GameObjects
              created, just by using the
              setActive() calls, we can bring in significant optimisations. I was able to load all the constellation
              data before startup, and only toggle between GameObjects when necessary.</p>
            <p>When working with creating the LineRenderer, initially I began with trying to delete and redraw lines,
              but for efficiency if I wanted to run this for every frame, it would be infeasible. This showed the
              importance of how GameObjects are to be handled.</p>
            <p>Currently all the stars transform their position and face towards the user at one go, hence this may feel
              abrupt to the user and not very natural. To prevent this, as a future scope, the stars could be randomly
              accessed within a certain radius and can be updated instead of a single update every x number of seconds.
            </p>
            <p>Given time, I would wish to use some sorting algorithms for the data so I could scale up the number of
              stars being implemented for the application. I would like to explore the effect of rendering within the
              Field of View as
              well. For this project I did not implement Field of View as the CAVE is also meant for collaboration and
              with multiple viewers, the field of view is only dependent on the person wearing the tracking glasses.</p>
            <p style="text-align: justify;"></p>
            <h1>Section 5 - Optimisations I performed:</h1>
            <ul>
              <li><b>Reducing the search space:</b> In general when looping through data to search for matched, like
                hip_id, as and when possible, I have put in break or continue statements so that the search space is
                reduced. For example, when a hip id needs to be searched for, once found the loop breaks instead of
                runing continously.</li>
              <li><b>LineRenderer:</b> For the LineRenderer initially the material I was using was 'Sprites/Default' and
                then I was attempting to remove the shadow functionalities from the lines, which was significantly
                affecting my startup time. To prevent this, I changed the material to Unlit/Color, which does not have
                shadows hence the startup time increased significantly. I also changed useWorldSpace=true for the
                LineRenderer.</li>
              <li><b>Shadows:</b>Through the setting of quality and GameObjects being spawned, I have tried to turn off
                Cast Shadows and Receive Shadow. </li>
              <li><b>Stars:</b> I have created a prefab of a star using a simple Quad and applying Laser Particle
                material. These stars then move there orientation using LookAt() function which is called in code.</li>
              <li><b>Dynamic Rendering with variable thresholds:</b> To keep the frame rate steady, I use dynamic
                rendering. First the code checks if the user has moved beyond a certain radius, and if they have moved,
                then it sets the stars at a certain radius as active and then reset the last position. Now depending on
                if the
                stars are moving or not, the threshold changes. Ideally, the threshold should also change when scale
                changes but that has not been implemented for this project due to complexity.</li>
              <li>
                Constellation Line Movement: The constellation lines are drawn using LineRenderer. To move the lines, I
                store a dictionary of values of hip_id and the location in the space. This dictionary would also update
                when motion would occur, or before a different constellation is selected, or if the scale is changed by
                the user. Once the dictionary is updated, both the hip_id of the line are stored in it's nanme which are
                then indexed in the dicitonary and the lines positons are updated. The dictionary only contains hip_id
                of the star which is part of any of the six constellation, hence keeping its size small.
              </li>
              <li><b>Updating values of GameObjects:</b> When trying to change the scale of the stars, it was important
                to
                ensure that if I was calculating new X,Y,Z values for the stars, then I would have to make sure the
                value was consistent. For example, if the user reduces the scale to 0.5 and then to 0.333, the
                computation should be such that value should not become 33% and not 16.5%. Hence I did not overwrite
                the values in StarData but only multiplied the position transform of the GameObject by the scale. Also,
                values to the GameObject were only updated if it was visible, otherwise only its corresponding value in
                the StarData class is updated. This I assumed would reduce the computational complexity as well.</li>
              <li>
                <b>Tradeoff between code organization and variable sharing:</b> Since multiple objects and interactions
                rely on the same set of variables, either all functions could be in one single class, or variables need
                to be shared. Hence in my project, StarDataLoader is the main class, from which all other classes
                inherit the variables and work with. This also had additional advantages as if I wanted to create one
                script to handle interactions, and the other to handle constellations, any shared variable such as
                constellation_type could be accessed by both scripts. This also helped in reducing the number of errors
                that could occur due to local variables.
              </li>
              </li>
            </ul>
            <h1>Some Screenshots:</h1>      
            <figure>
              <img style="height: 20rem; width:auto;" src="images/shiningstar/page4/1.png" alt="Image 1">
              <figcaption>Introduction Panel</figcaption>
              </figure>
              <figure>
                <img style="height: 5rem; width:auto;" src="images/shiningstar/page4/2.png" alt="Image 2">
                <figcaption>Information Panel at the foot of the CAVE</figcaption>
                </figure>
                <figure>
                  <img style="height: 20rem; width:auto;" src="images/shiningstar/page4/3.png" alt="Image 3">
                  <figcaption>Exoplanet Colours</figcaption>
                  </figure>
                  <figure>
                    <img style="height: 20rem; width:auto;" src="images/shiningstar/page4/4.png" alt="Image 4">
                    <figcaption>Constellation Change</figcaption>
                    </figure>
          </div>
        </div>

      </div>
    </div>


    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
      crossorigin="anonymous"></script>
</body>

</html>